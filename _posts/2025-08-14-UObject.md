---
title: UObject ìƒëª…ì£¼ê¸°
description: GCì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬
author: gemini
date: 2025-08-14 19:00:00 +09:00
categories: [Unreal]
tags: [UObject]
math: true
mermaid: true
---

#### GCì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬

##### C++ vs Unreal GC

- ì¼ë°˜ C++ì˜ ë¬¸ì œì 

```
MyClass* ptr = new MyClass();  // ìƒì„±
// ... ì‚¬ìš© ...
delete ptr;                    // ì‚­ì œ (í•„ìˆ˜!)
```

```
void ProblematicFunction()
{
    MyClass* obj = new MyClass();

    if (SomeCondition())
    {
        return;  // ì•—! objë¥¼ deleteí•˜ì§€ ëª»í–ˆë‹¤!
    }

    delete obj;  // ì´ ì¤„ì— ì˜ì›íˆ ë„ë‹¬í•˜ì§€ ëª»í•¨
}
```

```
MyClass* obj = new MyClass();
delete obj;
delete obj;  // ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ë‘ ë²ˆ ì§€ì›€ = í¬ë˜ì‹œ!

// ë˜ëŠ”
obj->DoSomething();  // ì´ë¯¸ ì§€ì›Œì§„ ë©”ëª¨ë¦¬ì— ì ‘ê·¼ = í¬ë˜ì‹œ!
```

- ì–¸ë¦¬ì–¼ GCì˜ í•´ê²°ì±…

```
UObject* obj = NewObject<UObject>();  // ìƒì„±
// ... ì‚¬ìš© ...
// delete ì•ˆ ì”€! ì–¸ë¦¬ì–¼ì´ ì•Œì•„ì„œ ì²˜ë¦¬
```

```
UObject* player = NewObject<UObject>();    // í”Œë ˆì´ì–´ ìƒì„±
UObject* weapon = NewObject<UObject>();    // ë¬´ê¸° ìƒì„±

player = nullptr;  // í”Œë ˆì´ì–´ë¥¼ ë” ì´ìƒ ì°¸ì¡°í•˜ì§€ ì•ŠìŒ

// ì ì‹œ í›„ GCê°€ ë™ì‘í•˜ë©´:
// - weapon: ì—¬ì „íˆ weapon ë³€ìˆ˜ê°€ ì°¸ì¡°í•˜ê³  ìˆìŒ â†’ ì‚´ì•„ë‚¨ìŒ
// - playerê°€ ê°€ë¦¬í‚¤ë˜ ê°ì²´: ì•„ë¬´ë„ ì°¸ì¡° ì•ˆ í•¨ â†’ ìë™ ì‚­ì œ
```

- GC ê·œì¹™
1. UObject ìƒì† í´ë˜ìŠ¤ë§Œ ê´€ë¦¬
2. UPROPERTYë¡œ ì°¸ì¡° í‘œì‹œ í•„ìˆ˜

```
class UMyClass : public UObject
{
    UPROPERTY()  // "ì´ ì°¸ì¡°ëŠ” ì¤‘ìš”í•´ìš”!" ë¼ê³  GCì—ê²Œ ì•Œë¦¼
    UObject* SafeRef;

    UObject* UnsafeRef;  // GCê°€ ì´ ì°¸ì¡°ë¥¼ ëª¨ë¦„!
};
```

3. ì ˆëŒ€ delete í•˜ë©´ ì•ˆ ë¨

```
UObject* obj = NewObject<UObject>();
delete obj;  // ì ˆëŒ€ ê¸ˆì§€! ì–¸ë¦¬ì–¼ ë‚´ë¶€ê°€ ë§ê°€ì§

// ì˜¬ë°”ë¥¸ ë°©ë²•:
obj = nullptr;  // ì°¸ì¡°ë§Œ ëŠìœ¼ë©´ GCê°€ ì•Œì•„ì„œ ì²˜ë¦¬
```


##### UObjectë€? ì–¸ë¦¬ì–¼ ì—”ì§„ì˜ í•µì‹¬ ìƒì

- ì¼ë°˜ C++ í´ë˜ìŠ¤ì˜ í•œê³„

```
class MyCppCharacter
{
private:
    int Health = 100;
    std::string Name = "Hero";

public:
    void TakeDamage(int Damage) { Health -= Damage; }
    int GetHealth() const { return Health; }
};
```

*ë¸”ë£¨í”„ë¦°íŠ¸ ì§€ì› ì•ˆë¨, ì—ë””í„° í†µí•© ì•ˆë¨, ìë™ ì €ì¥ ì•ˆë¨*

- UObjectì˜ ë§ˆë²•

```
UCLASS(BlueprintType)  // ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ!
class MYGAME_API UMyCharacter : public UObject
{
    GENERATED_BODY()

private:
    UPROPERTY(EditAnywhere, BlueprintReadWrite, SaveGame, meta = (AllowPrivateAccess = "true"))
    int32 Health = 100;  // ì—ë””í„° ìˆ˜ì • + ë¸”ë£¨í”„ë¦°íŠ¸ ì ‘ê·¼ + ìë™ ì €ì¥!

public:
    UFUNCTION(BlueprintCallable)  // ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥!
    void TakeDamage(int32 Damage);
};
```

*ë¸”ë£¨í”„ë¦°íŠ¸ ì§€ì›, ì—ë””í„° í†µí•©, ìë™ ì €ì¥, ë©”ëª¨ë¦¬ ìë™ ê´€ë¦¬*

- Objectê°€ ì œê³µí•˜ëŠ” í•µì‹¬ ê¸°ëŠ¥ë“¤
1. ë¸”ë£¨í”„ë¦°íŠ¸ í†µí•©
2. ì—ë””í„° í†µí•©
3. ìë™ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°

```
UPROPERTY(SaveGame)
int32 PlayerLevel;  // ìë™ìœ¼ë¡œ ì„¸ì´ë¸Œ íŒŒì¼ì— í¬í•¨!

UPROPERTY(SaveGame)
TArray<FString> CompletedQuests;  // í€˜ìŠ¤íŠ¸ ëª©ë¡ë„ ìë™ ì €ì¥!
```

4. ë¦¬í”Œë ‰ì…˜
5. ë©”ëª¨ë¦¬ ìë™ ê´€ë¦¬

```
// ì „í†µì ì¸ C++
Character* player = new Character();
Weapon* sword = new Weapon();
// ... ë‚˜ì¤‘ì— ë°˜ë“œì‹œ delete player; delete sword;

// UObject ë°©ì‹
UCharacter* player = NewObject<UCharacter>();
UWeapon* sword = NewObject<UWeapon>();
// delete ì—†ì–´ë„ GCê°€ ì•Œì•„ì„œ ì •ë¦¬!
```

- ì–¸ë¦¬ì–¼ í´ë˜ìŠ¤ ê³„ì¸µ

```
UObject (ëª¨ë“  ê²ƒì˜ ì‹œì‘)
â”œâ”€â”€ AActor (3D ì›”ë“œì— ì¡´ì¬í•˜ëŠ” ê²ƒë“¤)
â”‚   â”œâ”€â”€ APawn (ì¡°ì¢… ê°€ëŠ¥í•œ ê°ì²´)
â”‚   â”‚   â””â”€â”€ ACharacter (ê±¸ì–´ë‹¤ë‹ˆëŠ” ìºë¦­í„°)
â”‚   â”œâ”€â”€ AController (ë‘ë‡Œ ì—­í• )
â”‚   â””â”€â”€ AGameMode (ê²Œì„ ê·œì¹™ ê´€ë¦¬)
â”œâ”€â”€ UActorComponent (ì•¡í„°ì— ë¶™ì´ëŠ” ë¶€í’ˆë“¤)
â”‚   â”œâ”€â”€ UMeshComponent (ëª¨ë¸ í‘œì‹œ)
â”‚   â””â”€â”€ UMovementComponent (ì´ë™ ì²˜ë¦¬)
â””â”€â”€ UObject (ìˆœìˆ˜ ë°ì´í„°/ë¡œì§)
    â”œâ”€â”€ UGameInstance (ê²Œì„ ì „ì²´ ê´€ë¦¬)
    â””â”€â”€ UUserWidget (UI ìš”ì†Œ)
```

1. **í†µì¼ì„±** - ëª¨ë“  ê°ì²´ê°€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë™ì‘
2. **í™•ì¥ì„±** - ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ëª¨ë“  ê°ì²´ê°€ ìë™ìœ¼ë¡œ í˜œíƒ
3. **ìƒí˜¸ ìš´ìš©ì„±** - ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œë¼ë¦¬ ì‰½ê²Œ ì—°ë™


##### Outer ì²´ì¸ : ëˆ„ê°€ ëˆ„êµ¬ì˜ ì£¼ì¸ì¸ê°€?

- Outer = ì†Œìœ  ê´€ê³„

```
ì•„íŒŒíŠ¸ ê±´ë¬¼ (World - ê²Œì„ ì„¸ê³„)
  â””â”€â”€ 101í˜¸ (Level - í˜„ì¬ ë§µ)
       â””â”€â”€ í™ê¸¸ë™ (Actor - í”Œë ˆì´ì–´ ìºë¦­í„°)
            â”œâ”€â”€ ìŠ¤ë§ˆíŠ¸í° (Component - ì¸ë²¤í† ë¦¬)
            â”‚    â””â”€â”€ ì¹´ì¹´ì˜¤í†¡ (SubObject - ì•„ì´í…œ)
            â””â”€â”€ ì§€ê°‘ (Component - ì¥ë¹„)
                 â”œâ”€â”€ ì‹ ìš©ì¹´ë“œ (SubObject)
                 â””â”€â”€ í˜„ê¸ˆ (SubObject)
```

***í•µì‹¬** : ì£¼ì¸ì´ ì‚¬ë¼ì§€ë©´ ì†Œìœ ë¬¼ë„ ìë™ ì‚­ì œ*

- ì „í†µì ì¸ ë°©ì‹ vs Outer ë°©ì‹
1. ìë™ ë©”ëª¨ë¦¬ ì •ë¦¬ì˜ í•µì‹¬

```
// ì „í†µì ì¸ ë°©ì‹ (ë³µì¡í•¨)
void PlayerDied()
{
    delete player->inventory;
    delete player->weapon;
    delete player->armor;
    delete player->skills[0];
    delete player->skills[1];
    // ... ìˆ˜ì‹­ ê°œì˜ ê°ì²´ë¥¼ ì¼ì¼ì´ ì •ë¦¬
    delete player;

    // í•˜ë‚˜ë¼ë„ ë¹¼ë¨¹ìœ¼ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!
}
```

```
// Outer ë°©ì‹ (ê°„ë‹¨í•¨)
void PlayerDied()
{
    player->Destroy();  // ì´ í•œ ì¤„ë¡œ ë!
    // í”Œë ˆì´ì–´ê°€ ì†Œìœ í•œ ëª¨ë“  ê²ƒë“¤ì´ ìë™ìœ¼ë¡œ ì—°ì‡„ ì •ë¦¬ë¨
}
```

2. GCê°€ Outer ì²´ì¸ì„ ë”°ë¼ ì‘ë™
3. ë…¼ë¦¬ì  êµ¬ì¡°ë¥¼ ì½”ë“œë¡œ í‘œí˜„

- ìë™ ì •ë¦¬ ê³¼ì •

```
// ë ˆë²¨ ë°”ë€” ë•Œ
GetWorld()->LoadLevel(TEXT("NewLevel"));

// ì‹¤ì œë¡œëŠ” ì´ëŸ° ì¼ë“¤ì´ ìë™ìœ¼ë¡œ
// 1. í˜„ì¬ Levelì˜ ëª¨ë“  Actorë“¤ì—ê²Œ "ê³§ ì‚¬ë¼ì§„ë‹¤" ì•Œë¦¼
// 2. ê° Actorì˜ ëª¨ë“  Componentë“¤ ì •ë¦¬
// 3. ê° Componentì˜ ëª¨ë“  SubObjectë“¤ ì •ë¦¬
// 4. Level ìì²´ ì‚­ì œ
// â†’ ë§µ ì „ì²´ê°€ ê¹”ë”í•˜ê²Œ ì •ë¦¬ë¨!
```

```
void APlayerCharacter::Die()
{
    Destroy();  // í”Œë ˆì´ì–´ê°€ ì£½ì„ ë•Œ

    // ìë™ìœ¼ë¡œ ì •ë¦¬ë˜ëŠ” ê²ƒë“¤
    // - ì¸ë²¤í† ë¦¬ì˜ ëª¨ë“  ì•„ì´í…œ
    // - ì¥ì°©í•œ ëª¨ë“  ì¥ë¹„
    // - í™œì„±í™”ëœ ëª¨ë“  ìŠ¤í‚¬
    // - ìºë¦­í„°ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸
}
```

- NewObejctì—ì„œ Outer ì§€ì •

```
// NewObjectì˜ ê¸°ë³¸ í˜•íƒœ
UObject* NewObj = NewObject<UMyClass>(
    this,                    // â† ì´ ë¶€ë¶„ì´ Outer (ì£¼ì¸)
    UMyClass::StaticClass(), // í´ë˜ìŠ¤ íƒ€ì…
    TEXT("ObjectName")       // ì´ë¦„ (ì„ íƒ)
);

// ë‹¤ì–‘í•œ Outer ì„ íƒ ì˜ˆì‹œ
UObject* TempObj = NewObject<UObject>(GetTransientPackage());     // ì„ì‹œ ê°ì²´
UObject* WorldObj = NewObject<UObject>(GetWorld());              // ì›”ë“œ ë ˆë²¨
UObject* GameObj = NewObject<UObject>(GetGameInstance());        // ê²Œì„ ì „ì²´
UActorComponent* Comp = NewObject<UActorComponent>(MyActor);     // ì•¡í„° ì†Œìœ 
```

- ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤
1. ì˜ëª»ëœ Outer ì„ íƒ

```
// ë¬¸ì œ: UIë¥¼ ì•¡í„°ê°€ ì†Œìœ í•˜ê²Œ í•¨
UUserWidget* Widget = NewObject<UUserWidget>(SomeActor);
// â†’ ì•¡í„°ê°€ ì£½ìœ¼ë©´ UIë„ ì‚¬ë¼ì§!

// í•´ê²°: UIëŠ” í”Œë ˆì´ì–´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì†Œìœ 
UUserWidget* Widget = NewObject<UUserWidget>(GetPlayerController());
// â†’ ì•¡í„°ê°€ ì£½ì–´ë„ UIëŠ” ìœ ì§€ë¨
```

2. Outer ì²´ì¸ ëŠê¸°

```
// ìœ„í—˜: ì¤‘ê°„ ê°ì²´ë¥¼ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™
UObject* Parent = NewObject<UObject>(this);
UObject* Child = NewObject<UObject>(Parent);

Parent->Rename(nullptr, SomeOtherObject);  // Parentë¥¼ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™
// â†’ Childê°€ ê³ ì•„ê°€ ë  ìˆ˜ ìˆìŒ!
```


##### ìƒì„±, ìˆ˜ëª…, GCí•µì‹¬

###### ìƒì„± íŒ¨í„´ : `CreateDefaultSubobject` vs `NewObject`

- CreateDefaultSubobject - ë¯¸ë¦¬ ì¤€ë¹„

```
class AMyActor : public AActor
{
    AMyActor()  // ìƒì„±ì: ì´ ì•¡í„°ê°€ íƒœì–´ë‚  ë•Œ ë”± í•œ ë²ˆ ì‹¤í–‰
    {
        // "ì´ ì•¡í„°ì˜ í•„ìˆ˜í’ˆë“¤ì„ ë¯¸ë¦¬ ì¤€ë¹„í•´ë‘¬"
        MeshComponent = CreateDefaultSubobject<UStaticMeshComponent>(TEXT("MeshComponent"));
        CollisionComponent = CreateDefaultSubobject<USphereComponent>(TEXT("Collision"));
    }

private:
    UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Components")
    UStaticMeshComponent* MeshComponent;

    UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Components")
    USphereComponent* CollisionComponent;
};
```

- NewObject - í•„ìš”í•  ë•Œ

```
void AMyActor::OnLevelUp()  // ë ˆë²¨ì—…í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
{
    if (PlayerLevel >= 10)  // 10ë ˆë²¨ ì´ìƒì´ë©´
    {
        // "ì§€ê¸ˆ ë‹¹ì¥ íŠ¹ìˆ˜ëŠ¥ë ¥ì„ ë§Œë“¤ì–´ì¤˜!"
        USpecialAbility* NewAbility = NewObject<USpecialAbility>(
            this,                           // ëˆ„ê°€ ì£¼ì¸? â†’ ì´ ì•¡í„°
            USpecialAbility::StaticClass(), // ì–´ë–¤ íƒ€ì…?
            TEXT("FireballAbility")         // ì´ë¦„ì€ ë­ë¡œ í• ê¹Œ?
        );

        Abilities.Add(NewAbility);  // ëŠ¥ë ¥ ëª©ë¡ì— ì¶”ê°€
    }
}
```

- ì–¸ì œ ë¬´ì—‡ì„ ì“¸ê¹Œ

| êµ¬ë¶„         | CreateDefaultSubobject | NewObject      |
| ---------- | ---------------------- | -------------- |
| **ì‚¬ìš© ì‹œì **  | ìƒì„±ìì—ì„œë§Œ                 | ì–¸ì œë“ ì§€           |
| **ëª©ì **     | ê¸°ë³¸ êµ¬ì„±í’ˆ (í•„ìˆ˜)            | ë™ì  ìƒì„± (ì„ íƒ)     |
| **ì—ë””í„° ì§€ì›** | ì™„ì „ í†µí•©                  | ëŸ°íƒ€ì„ ì „ìš©         |
| **ì˜ˆì¸¡ ê°€ëŠ¥ì„±** | í•­ìƒ ê°™ìŒ                  | ìƒí™©ë§ˆë‹¤ ë‹¤ë¦„        |
| **ì‚¬ìš© ì˜ˆì‹œ**  | ë©”ì‹œ, ì¹´ë©”ë¼, ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸       | ì•„ì´í…œ, ëŠ¥ë ¥, ì„ì‹œ ê°ì²´ |

###### UObject ë¼ì´í”„ ì‚¬ì´í´

```
UCLASS()
class UMyObject : public UObject
{
    GENERATED_BODY()

public:
    // 1ë‹¨ê³„: "ë°©ê¸ˆ íƒœì–´ë‚¬ì–´ìš”!"
    virtual void PostInitProperties() override
    {
        Super::PostInitProperties();  // ë¶€ëª¨ì˜ ì´ˆê¸°í™”ë¶€í„° ë¨¼ì €!

        // ê¸°ë³¸ê°’ ê²€ì¦ ë° ë³´ì •
        if (SomeImportantValue <= 0)
        {
            SomeImportantValue = 100;  // ì˜ëª»ëœ ê°’ ë³´ì •
        }
    }

    // 2ë‹¨ê³„: "ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ì–´ìš”!"
    virtual void PostLoad() override
    {
        Super::PostLoad();

        // êµ¬ë²„ì „ ë°ì´í„°ë¥¼ ì‹ ë²„ì „ìœ¼ë¡œ ë³€í™˜
        if (DataVersion < CURRENT_VERSION)
        {
            UpgradeDataFormat();
        }
    }

    // 3ë‹¨ê³„: "ê³§ ì£½ì„ ì˜ˆì •ì´ì—ìš”..."
    virtual void BeginDestroy() override
    {
        // ë‹¤ë¥¸ ê°ì²´ë“¤ì—ê²Œ ì‘ë³„ ì¸ì‚¬
        NotifyOthersAboutMyDeath();

        Super::BeginDestroy();  // ë¶€ëª¨ì˜ ì •ë¦¬ ì‘ì—…
    }

    // 4ë‹¨ê³„: "ì™„ì „íˆ ì‚¬ë¼ì ¸ìš”"
    virtual void FinishDestroy() override
    {
        // ë§ˆì§€ë§‰ ì •ë¦¬ ì‘ì—…
        Super::FinishDestroy();
    }
};
```

- Super:: í˜¸ì¶œì˜ ì¤‘ìš”ì„±

```
// ì´ë ‡ê²Œ í•˜ë©´ í°ì¼ ë‚©ë‹ˆë‹¤!
virtual void PostInitProperties() override
{
    // Super::PostInitProperties(); ìƒëµí•¨!
    MyCustomInitialization();
    // â†’ ì–¸ë¦¬ì–¼ ì—”ì§„ì˜ ê¸°ë³¸ ì´ˆê¸°í™”ê°€ ì•ˆ ë¨!
}

// ì˜¬ë°”ë¥¸ ë°©ë²•
virtual void PostInitProperties() override
{
    Super::PostInitProperties();  // ë¶€ëª¨ì˜ ì´ˆê¸°í™” ë¨¼ì €
    MyCustomInitialization();    // ê·¸ ë‹¤ìŒì— ë‚´ ì´ˆê¸°í™”
}
```

- GetWorld() ì‚¬ìš©ë²•

```
// ì´ë ‡ê²Œ í•˜ë©´ í°ì¼ ë‚©ë‹ˆë‹¤!
virtual void PostInitProperties() override
{
    // Super::PostInitProperties(); ìƒëµí•¨!
    MyCustomInitialization();
    // â†’ ì–¸ë¦¬ì–¼ ì—”ì§„ì˜ ê¸°ë³¸ ì´ˆê¸°í™”ê°€ ì•ˆ ë¨!
}

// ì˜¬ë°”ë¥¸ ë°©ë²•
virtual void PostInitProperties() override
{
    Super::PostInitProperties();  // ë¶€ëª¨ì˜ ì´ˆê¸°í™” ë¨¼ì €
    MyCustomInitialization();    // ê·¸ ë‹¤ìŒì— ë‚´ ì´ˆê¸°í™”
}
```


###### GC ë™ì‘ ì›ë¦¬ : Mark & Sweep

- GC ì‘ì—… ê³¼ì •

```
ê²Œì„ ìƒí™©: í”Œë ˆì´ì–´ê°€ ë¬´ê¸°ë¥¼ ë²„ë ¸ë‹¤

ì‹œì‘ ìƒíƒœ:
[World] â†’ [PlayerController] â†’ [PlayerCharacter] â†’ [InventoryComponent]
                                                  â†˜
                                                   [WeaponItem] â†’ [WeaponMesh]

ë¬´ê¸°ë¥¼ ë²„ë¦° í›„:
[World] â†’ [PlayerController] â†’ [PlayerCharacter] â†’ [InventoryComponent]

                              (ì—°ê²° ëŠì–´ì§)

                                                   [WeaponItem] â†’ [WeaponMesh]

GC ì‹¤í–‰:
1. Mark ë‹¨ê³„:
   - Worldë¶€í„° ì‹œì‘ âœ“
   - PlayerController í‘œì‹œ âœ“
   - PlayerCharacter í‘œì‹œ âœ“
   - InventoryComponent í‘œì‹œ âœ“
   - WeaponItemì€ ì•„ë¬´ë„ ì°¸ì¡° ì•ˆ í•¨ â†’ í‘œì‹œ ì—†ìŒ âœ—
   - WeaponMeshë„ í‘œì‹œ ì—†ìŒ âœ—

2. Sweep ë‹¨ê³„:
   - WeaponItem ì‚­ì œ
   - WeaponMesh ì‚­ì œ
```


###### UPROPERTYì˜ ì§„ì‹¤ : GCê°€ ë³´ëŠ” ê²ƒê³¼ ëª» ë³´ëŠ” ê²ƒ

- ì™œ UPROPERTYë¥¼ ë³¼ê¹Œ
1. ì„±ëŠ¥ ë•Œë¬¸

```
class UMyComplexObject : public UObject
{
    // UObject í¬ì¸í„°ë“¤ (GCê°€ ê´€ì‹¬ìˆì–´ í•¨)
    UObject* Obj1;
    UObject* Obj2;

    // ì¼ë°˜ C++ íƒ€ì…ë“¤ (GCê°€ ê´€ì‹¬ì—†ìŒ)
    int32 SomeNumber;
    float SomeFloat;
    FString SomeString;
    TArray<int32> NumberArray;

    // ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ€ì…ë“¤ (GCê°€ ì•Œ ìˆ˜ ì—†ìŒ)
    std::vector<int> CppVector;
    std::shared_ptr<SomeClass> SharedPtr;

    // ê·¸ ì™¸ ìˆ˜ì‹­, ìˆ˜ë°± ê°œì˜ ë³€ìˆ˜ë“¤...
};
```

2. íƒ€ì… ì•ˆì „ì„± ë•Œë¬¸

```
class UConfusingObject : public UObject
{
    void* VoidPointer;          // ì´ê²Œ ë­˜ ê°€ë¦¬í‚¤ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ìŒ
    int32* IntPointer;          // intë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°
    UObject* ObjectPointer;     // UObjectë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°

    // GCëŠ” ì´ ì¤‘ì—ì„œ ë­˜ ì²´í¬í•´ì•¼ í• ê¹Œìš”?
    // â†’ ObjectPointerë§Œ ì²´í¬í•˜ë©´ ë¨!
    // â†’ í•˜ì§€ë§Œ ê·¸ê±¸ ì–´ë–»ê²Œ êµ¬ë¶„í• ê¹Œ?
    // â†’ UPROPERTYë¡œ í‘œì‹œí•˜ë©´ í™•ì‹¤!
};
```

3. ì˜ë„ íŒŒì•… ë•Œë¬¸

```
class UIntentionExample : public UObject
{
    UObject* ImportantReference;    // ì´ê±´ ì¤‘ìš”í•œ ì°¸ì¡°ì¼ê¹Œ? ì„ì‹œì¼ê¹Œ?
    UObject* TemporaryPointer;      // ì ê¹” ì“°ê³  ë²„ë¦´ í¬ì¸í„°ì¼ê¹Œ?
    UObject* CachePointer;          // ì„±ëŠ¥ì„ ìœ„í•œ ìºì‹œì¼ê¹Œ?

    // ê°œë°œìë§Œì´ ê° í¬ì¸í„°ì˜ ì˜ë„ë¥¼ ì•Œê³  ìˆìŒ
    // UPROPERTY = "ì´ê±´ ì¤‘ìš”í•˜ë‹ˆê¹Œ GCê°€ ì‹ ê²½ì¨ì¤˜"
    // UPROPERTY ì—†ìŒ = "ì´ê±´ ì„ì‹œë‹ˆê¹Œ ì‹ ê²½ ì•ˆ ì¨ë„ ë¼"
};
```

- UPROPERTY ìˆìŒ vs. ì—†ìŒ

```
UCLASS()
class UGCTestObject : public UObject
{
    GENERATED_BODY()

public:
    // UPROPERTY ìˆìŒ - GCê°€ ë³´í˜¸í•¨
    UPROPERTY()
    UObject* SafeReference;

    UPROPERTY()
    TArray<UObject*> SafeArray;

    // UPROPERTY ì—†ìŒ - GCê°€ ëª¨ë¦„
    UObject* UnsafeReference;
    TArray<UObject*> UnsafeArray;

    void TestTheReferences()
    {
        // í…ŒìŠ¤íŠ¸ìš© ê°ì²´ë“¤ ìƒì„±
        UObject* TestObj1 = NewObject<UObject>(this);
        UObject* TestObj2 = NewObject<UObject>(this);

        // ì°¸ì¡° ì„¤ì •
        SafeReference = TestObj1;     // GCê°€ TestObj1ì„ ë³´í˜¸
        UnsafeReference = TestObj2;   // GCê°€ TestObj2ë¥¼ ëª¨ë¦„!

        // ì ì‹œ í›„ GC ì‹¤í–‰ë˜ë©´...
        // TestObj1 â†’ ì‚´ì•„ë‚¨ìŒ
        // TestObj2 â†’ ì‚­ì œë¨!
    }
};
```

- ë‹¤ì–‘í•œ UPROPERTY ì ìš© ì‚¬ë¡€
1. ê¸°ë³¸ ì°¸ì¡°ë“¤

```
class UBasicReferences : public UObject
{
    UPROPERTY()
    UObject* SingleObject;              // ë‹¨ì¼ ê°ì²´ ì°¸ì¡°

    UPROPERTY()
    TArray<UObject*> ObjectArray;       // ë°°ì—´ ì°¸ì¡° (ë°°ì—´ ì•ˆì˜ ëª¨ë“  ê°ì²´ ë³´í˜¸ë¨)

    UPROPERTY()
    TMap<FString, UObject*> ObjectMap;  // ë§µ ì°¸ì¡° (Value ê°ì²´ë“¤ë§Œ ë³´í˜¸ë¨)
};
```

2. êµ¬ì¡°ì²´ ì•ˆì˜ ì°¸ì¡°ë„ ë³´í˜¸ë¨

```
USTRUCT()
struct FMyStruct
{
    GENERATED_BODY()

    UPROPERTY()
    UObject* NestedObject;  // êµ¬ì¡°ì²´ ì•ˆì˜ ì°¸ì¡°ë„ GCê°€ ë´„!
};

UCLASS()
class UStructContainer : public UObject
{
    UPROPERTY()
    FMyStruct MyStruct;  // êµ¬ì¡°ì²´ ì „ì²´ë¥¼ UPROPERTYë¡œ í•˜ë©´
                         // êµ¬ì¡°ì²´ ì•ˆì˜ UObject ì°¸ì¡°ë“¤ë„ ëª¨ë‘ ë³´í˜¸ë¨!
};
```

- UPROPERTY ì—†ëŠ” ì°¸ì¡° ì•ˆì „í•˜ê²Œ ë‹¤ë£¨ê¸°

```
class UAdvancedUsage : public UObject
{
    // ì´ëŸ° ê²ƒë“¤ì€ UPROPERTYê°€ ì•ˆ ë¨
    TSharedPtr<FMyData> SharedData;           // ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°
    std::unique_ptr<SomeClass> UniquePtr;     // C++ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°

public:
    // ë°©ë²• 1: ìˆ˜ëª…ì„ ëª…í™•íˆ ê´€ë¦¬
    void SafeUsagePattern()
    {
        auto Data = MakeShared<FMyData>();
        SharedData = Data;

        ProcessData(SharedData.Get());  // ì´ í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©

        SharedData.Reset();  // ëª…ì‹œì  í•´ì œ
    }

    // ë°©ë²• 2: BeginDestroyì—ì„œ ì •ë¦¬
    virtual void BeginDestroy() override
    {
        SharedData.Reset();     // ì£½ê¸° ì „ì— ëª¨ë“  í¬ì¸í„° ì •ë¦¬
        UniquePtr.reset();

        Super::BeginDestroy();
    }
};
```


##### AddToRoot : ê°•ë ¥í•˜ì§€ë§Œ ìœ„í—˜í•œ ìµœí›„ì˜ ìˆ˜ë‹¨

- ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•
1. ì‹±ê¸€í†¤

```
// ê²Œì„ ì „ì²´ì—ì„œ í•˜ë‚˜ë§Œ ì¡´ì¬í•´ì•¼ í•˜ëŠ” ë§¤ë‹ˆì €
class USoundManager : public UObject
{
    static USoundManager* Instance;

public:
    static USoundManager* GetInstance()
    {
        if (!Instance)
        {
            Instance = NewObject<USoundManager>(GetTransientPackage());
            Instance->AddToRoot();  // Rootì— ì¶”ê°€ â†’ ê²Œì„ì´ ëë‚  ë•Œê¹Œì§€ ë³´ì¡´
        }
        return Instance;
    }

    static void Shutdown()
    {
        if (Instance)
        {
            Instance->RemoveFromRoot();  // Rootì—ì„œ ì œê±° (ì¤‘ìš”!)
            Instance = nullptr;
        }
    }
};

// ê²Œì„ ì¢…ë£Œ ì‹œ - ë°˜ë“œì‹œ í˜¸ì¶œí•´ì•¼ í•¨!
void UMyGameInstance::Shutdown()
{
    USoundManager::Shutdown();  // ìˆ˜ë™ìœ¼ë¡œ ì •ë¦¬
    Super::Shutdown();
}
```

2. ë¹„ë™ê¸° ì‘ì—… ë³´í˜¸

```
// ë¹„ë™ê¸° ë¡œë”© ì¤‘ì—ëŠ” ì‚­ì œë˜ë©´ ì•ˆ ë˜ëŠ” ê°ì²´
class UAssetLoader : public UObject
{
public:
    void LoadAssetAsync(const FSoftObjectPath& AssetPath)
    {
        AddToRoot();    // ë¡œë”© ì‹œì‘ ì „ì— ìì‹ ì„ ë³´í˜¸
        bIsLoading = true;

        // ë¹„ë™ê¸° ë¡œë”© ì‹œì‘
        UAssetManager& AssetManager = UAssetManager::Get();
        StreamableHandle = AssetManager.LoadAssetAsync(AssetPath,
            FStreamableDelegate::CreateUObject(this, &UAssetLoader::OnLoadComplete)
        );
    }

private:
    void OnLoadComplete()
    {
        bIsLoading = false;
        RemoveFromRoot();  // ë¡œë”© ì™„ë£Œ â†’ ë³´í˜¸ í•´ì œ

        // ì´ì œ ì´ ê°ì²´ëŠ” í•„ìš”ì—†ìœ¼ë©´ GCê°€ ì •ë¦¬í•  ìˆ˜ ìˆìŒ
    }
};
```

3. ì„ì‹œ ë³´í˜¸

```
// ìœ„í—˜í•œ ì‘ì—… ì¤‘ ì„ì‹œ ë³´í˜¸
void RiskyOperation(UObject* ImportantObject)
{
    ImportantObject->AddToRoot();       // ìœ„í—˜í•œ ì‘ì—… ì „ì— ì„ì‹œ ë³´í˜¸

    LoadSomeHeavyAssets();              // GC ìœ ë°œ ê°€ëŠ¥í•œ ì‘ì—…ë“¤
    CreateThousandsOfObjects();
    CallComplexBlueprintFunction();

    ImportantObject->RemoveFromRoot();  // ì‘ì—… ì™„ë£Œ ì¦‰ì‹œ ë³´í˜¸ í•´ì œ
}

```

- ìœ„í—˜í•œ ì‚¬ìš© íŒ¨í„´ë“¤
1. RemoveFromRoot ì—†ëŠ” ë¬´í•œ ë³´ì¡´

```
// ì´ë ‡ê²Œ í•˜ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!
class UBadManager : public UObject
{
public:
    void CreateImportantData()
    {
        UObject* Data = NewObject<UObject>(this);
        Data->AddToRoot();  // Rootì— ì¶”ê°€

        ImportantData.Add(Data);

        // ë¬¸ì œ: ì–¸ì œ RemoveFromRoot()ë¥¼ í• ì§€ ì •í•˜ì§€ ì•ŠìŒ!
        // ê²°ê³¼: ì´ ê°ì²´ëŠ” ê²Œì„ì´ ëë‚  ë•Œê¹Œì§€ ë©”ëª¨ë¦¬ì— ì˜ì›íˆ ë‚¨ìŒ
    }
};
```

2. ë¶ˆí•„ìš”í•œ Root ì¶”ê°€

```
// ì´ë¯¸ ë³´í˜¸ë°›ëŠ” ê°ì²´ì— ë˜ Root ì¶”ê°€
class AMyActor : public AActor
{
public:
    void BeginPlay() override
    {
        Super::BeginPlay();

        AddToRoot();  // ì˜ëª»ëœ ìƒê°: "í˜¹ì‹œ ëª°ë¼ì„œ Rootì— ì¶”ê°€í•˜ì"

        // ë¬¸ì œ: ActorëŠ” ì´ë¯¸ Worldê°€ Root ì—­í• ì„ í•¨!
        // ì¤‘ë³µ ë³´í˜¸ = ë¶ˆí•„ìš”í•œ ì„±ëŠ¥ ë‚­ë¹„ + ë³µì¡ì„± ì¦ê°€
    }
};
```

- ë” ì¢‹ì€ ëŒ€ì•ˆë“¤
1. UPROPERTY ì‚¬ìš© (95% ìƒí™©ì—ì„œ ìµœì„ )

```
// ëŒ€ì•ˆ 1: UPROPERTY ì‚¬ìš©
class UGoodManager : public UObject
{
    UPROPERTY()  // AddToRoot ì—†ì´ë„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬
    TArray<UObject*> ManagedObjects;

public:
    void AddManagedObject(UObject* NewObj)
    {
        ManagedObjects.Add(NewObj);  // UPROPERTYë¡œ ì¶©ë¶„íˆ ë³´í˜¸ë¨
    }
};
```

2. Outer ê´€ê³„ í™œìš©

```
// ëŒ€ì•ˆ 2: Outer ê´€ê³„ í™œìš©
class UDataContainer : public UObject
{
public:
    UObject* CreateSubData(TSubclassOf<UObject> DataClass)
    {
        // thisê°€ Outer â†’ Containerê°€ ì‚¬ë¼ì§€ë©´ SubDataë„ ìë™ ì •ë¦¬
        return NewObject<UObject>(this, DataClass);
    }
};
```

3. ê²Œì„ ì¸ìŠ¤í„´ìŠ¤ë‚˜ ì›”ë“œì— ë“±ë¡

```
// ëŒ€ì•ˆ 3: ê²Œì„ ì¸ìŠ¤í„´ìŠ¤ë‚˜ ì›”ë“œì— ë“±ë¡
class UGlobalDataManager : public UObject
{
public:
    static UGlobalDataManager* CreateInstance(UGameInstance* GameInstance)
    {
        // GameInstanceê°€ Outer â†’ ê²Œì„ì´ ëë‚  ë•Œê¹Œì§€ ë³´ì¡´
        return NewObject<UGlobalDataManager>(GameInstance);
        // AddToRoot() ë¶ˆí•„ìš”! GameInstanceê°€ ì´ë¯¸ Rootì´ë¯€ë¡œ ìë™ ë³´í˜¸
    }
};
```


##### ì°¸ì¡° ê´€ë¦¬ ê¸°ì´ˆ

###### Hard vs Week : ì„ íƒ ê·œì¹™ê³¼ ì•ˆì „ íŒ¨í„´

- Hard Reference (ê°•í•œ ì°¸ì¡°)

```
UCLASS()
class UInventory : public UObject
{
    GENERATED_BODY()

public:
    // ì´ê²Œ Hard Reference (ê°•í•œ ì°¸ì¡°)
    UPROPERTY()
    TArray<UObject*> Items;  // UObject* = ì¼ë°˜ í¬ì¸í„° = Hard
};
```

```
UInventory* Inventory = NewObject<UInventory>();
UItem* Sword = NewObject<UItem>();

Inventory->Items.Add(Sword);  // Inventoryê°€ Swordë¥¼ "ì†Œìœ "
// ì´ì œ SwordëŠ” Inventoryê°€ ì‚´ì•„ìˆëŠ” í•œ ì ˆëŒ€ ì‚­ì œë˜ì§€ ì•ŠìŒ
```

- Week Reference (ì•½í•œ ì°¸ì¡°)

```
UCLASS()
class UItemWidget : public UObject
{
    GENERATED_BODY()

public:
    // ì´ê²Œ Weak Reference (ì•½í•œ ì°¸ì¡°)
    UPROPERTY()
    TWeakObjectPtr<AActor> ObservedActor;  // TWeakObjectPtr = Weak

    void UpdateDisplay()
    {
        // Weak ì°¸ì¡°ëŠ” í•­ìƒ ìœ íš¨ì„± ì²´í¬ í•„ìˆ˜!
        if (ObservedActor.IsValid())  // "ì•„ì§ ì‚´ì•„ìˆë‚˜?"
        {
            AActor* Actor = ObservedActor.Get();  // ì‹¤ì œ í¬ì¸í„° ê°€ì ¸ì˜¤ê¸°
            FString Name = Actor->GetName();      // ì´ì œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©
        }
        else
        {
            // ëŒ€ìƒì´ ì´ë¯¸ ì‚­ì œë¨ â†’ UIë¥¼ ë¹„ìš°ê±°ë‚˜ ê¸°ë³¸ê°’ í‘œì‹œ
        }
    }
};
```

- ì‚¬ìš©ë²• ë¹„êµ

```
// Hard Reference ì²´í¬
UPROPERTY()
AActor* MyActor;

void CheckHardRef()
{
    if (IsValid(MyActor))  // ì „ì—­ í•¨ìˆ˜ IsValid()
    {
        MyActor->DoSomething();  // ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥
    }
}

// Weak Reference ì²´í¬
UPROPERTY()
TWeakObjectPtr<AActor> MyActorWeak;

void CheckWeakRef()
{
    if (MyActorWeak.IsValid())  // ë©¤ë²„ í•¨ìˆ˜ IsValid()
    {
        AActor* Actor = MyActorWeak.Get();  // Get()ìœ¼ë¡œ í¬ì¸í„° íšë“
        Actor->DoSomething();               // ì´ì œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©
    }
}
```


###### ì‹¤ì œ ê²Œì„ ìƒí™©ì—ì„œì˜ ì„ íƒ ê¸°ì¤€

- ì „í˜•ì ì¸ ì†Œìœ  ê´€ê³„ (Hard)

```
// ì¸ë²¤í† ë¦¬ ì‹œìŠ¤í…œ
class UInventory : public UObject
{
    UPROPERTY()
    TArray<UItem*> Items;  // Hard: ì¸ë²¤í† ë¦¬ê°€ ì•„ì´í…œë“¤ì„ ì†Œìœ 
};

// ìŠ¤í‚¬ ì‹œìŠ¤í…œ
class USkillManager : public UObject
{
    UPROPERTY()
    TArray<USkill*> LearnedSkills;  // Hard: ë§¤ë‹ˆì €ê°€ ìŠ¤í‚¬ë“¤ì„ ê´€ë¦¬
};
```

- ì „í˜•ì ì¸ ê´€ì°° ê´€ê³„ (Week)

```
// UI ì‹œìŠ¤í…œ
class UHealthBarWidget : public UUserWidget
{
    UPROPERTY()
    TWeakObjectPtr<ACharacter> WatchedCharacter;  // Weak: UIëŠ” ê´€ì°°ë§Œ í•¨
};

// ë¯¸ë‹ˆë§µ ì‹œìŠ¤í…œ
class UMinimapWidget : public UUserWidget
{
    UPROPERTY()
    TWeakObjectPtr<APawn> TrackedPlayer;  // Weak: ì¶”ì ë§Œ í•¨
};

```


###### ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜ë“¤

1. UPROPERTY ì—†ëŠ” ìƒ í¬ì¸í„°

```
// ì ˆëŒ€ ê¸ˆì§€! - GCê°€ ëª¨ë¥´ëŠ” í¬ì¸í„°
class UBadExample : public UObject
{
    UObject* DangerousPtr;  // UPROPERTY ì—†ìŒ = í¬ë˜ì‹œ ìœ„í—˜!
};
```

2. Week ì°¸ì¡°ë¥¼ ì²´í¬ ì—†ì´ ì‚¬ìš©

```
// ìœ„í—˜í•œ ì½”ë“œ - ì‚­ì œëœ ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŒ
void BadWeakUsage()
{
    AActor* Actor = WeakPtr.Get();  // IsValid() ì²´í¬ ì—†ì´ ë°”ë¡œ Get()
    Actor->DoSomething();  // ğŸ’¥ í¬ë˜ì‹œ ê°€ëŠ¥ì„±!
}

// ì˜¬ë°”ë¥¸ ì½”ë“œ - í•­ìƒ ì²´í¬ í›„ ì‚¬ìš©
void GoodWeakUsage()
{
    if (WeakPtr.IsValid())  // ë¨¼ì € ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸
    {
        AActor* Actor = WeakPtr.Get();
        Actor->DoSomething();  // ì•ˆì „
    }
}
```

3. ëª¨ë“  ê±¸ Hardë¡œ í•˜ê¸°


##### ìˆœí™˜ ì°¸ì¡° ì°¨ë‹¨ : ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì˜ ì£¼ë²”ì„ ë§‰ì

- ë¬¸ì œ : ìˆœí™˜ ì°¸ì¡°

```
// ìˆœí™˜ ì°¸ì¡° - ì¬ì•™ì˜ ì‹œì‘
class UParent : public UObject
{
    UPROPERTY()
    UChild* Child;  // Parentê°€ Childë¥¼ Hard ì°¸ì¡°
};

class UChild : public UObject
{
    UPROPERTY()
    UParent* Parent;  // Childë„ Parentë¥¼ Hard ì°¸ì¡° (ë¬¸ì œ!)
};
```

```
Parent â”€(ê°•í•œ ì°¸ì¡°)â†’ Child
  â†‘                    â†“
  â””â”€â”€(ê°•í•œ ì°¸ì¡°)â”€â”€â”€â”€â”€â”€â”€â”˜

"ë‚˜ëŠ” ì € ì• ê°€ ìˆì–´ì•¼ ì‚´ ìˆ˜ ìˆì–´!"
"ë‚˜ë„ ì € ì• ê°€ ìˆì–´ì•¼ ì‚´ ìˆ˜ ìˆì–´!"
ê²°ê³¼: ë‘˜ ë‹¤ ì˜ì›íˆ ë©”ëª¨ë¦¬ì—ì„œ ì•ˆ ì‚¬ë¼ì§
```

- í•´ê²°ë²•
1. í•œìª½ì„ Weekë¡œ

```
// ì˜¬ë°”ë¥¸ ì½”ë“œ - ìˆœí™˜ ì°¸ì¡° í•´ê²°!
UCLASS()
class UParent : public UObject
{
    GENERATED_BODY()
public:
    UPROPERTY()
    UChild* Child;  // Parent â†’ ChildëŠ” Hard (ì†Œìœ )

    void CreateChild()
    {
        Child = NewObject<UChild>(this);
        Child->SetParent(this);  // ìì‹ì—ê²Œ ë¶€ëª¨ ì•Œë ¤ì£¼ê¸°
    }
};

UCLASS()
class UChild : public UObject
{
    GENERATED_BODY()
public:
    UPROPERTY()
    TWeakObjectPtr<UParent> Parent;  // Child â†’ ParentëŠ” Weak (ì—­ì°¸ì¡°)

    void SetParent(UParent* NewParent)
    {
        Parent = NewParent;
    }

    void DoSomethingWithParent()
    {
        if (Parent.IsValid())  // í•­ìƒ ì²´í¬!
        {
            UParent* P = Parent.Get();
            // ì•ˆì „í•˜ê²Œ ë¶€ëª¨ ì‚¬ìš©
        }
    }
};
```

```
Parent â”€(ê°•í•œ ì°¸ì¡°)â†’ Child
  â†‘                    â†“
  â””â”€â”€(ì•½í•œ ì°¸ì¡°)â”€â”€â”€â”€â”€â”€â”€â”˜

Parent: "ë‚˜ëŠ” Childë¥¼ ì†Œìœ í•˜ê³  ì±…ì„ì§„ë‹¤"
Child: "Parentë¥¼ ì§€ì¼œë³´ê¸´ í•˜ì§€ë§Œ ë¶™ì¡ê³  ìˆì§€ëŠ” ì•Šì•„"
ê²°ê³¼: Parentê°€ í•„ìš”ì—†ì–´ì§€ë©´ Childë„ í•¨ê»˜ ì •ë¦¬ë¨
```

- ì‹¤ì œ ê²Œì„ ì˜ˆì‹œë“¤

```
// ì¸ë²¤í† ë¦¬ ì‹œìŠ¤í…œ
class UInventory : public UObject
{
    UPROPERTY()
    TArray<UItem*> Items;  // Hard: ì¸ë²¤í† ë¦¬ê°€ ì•„ì´í…œ ì†Œìœ 
};

class UItem : public UObject
{
    UPROPERTY()
    TWeakObjectPtr<UInventory> OwnerInventory;  // Weak: ì•„ì´í…œì´ ì†Œìœ ì ì°¸ì¡°
};
```

```
// UI ì‹œìŠ¤í…œ
class UPlayerHUD : public UUserWidget
{
    UPROPERTY()
    TArray<UWidget*> ChildWidgets;  // Hard: HUDê°€ ìì‹ ìœ„ì ¯ë“¤ ì†Œìœ 
};

class UHealthBar : public UUserWidget
{
    UPROPERTY()
    TWeakObjectPtr<UPlayerHUD> ParentHUD;  // Weak: ìì‹ì´ ë¶€ëª¨ ì°¸ì¡°
};
```

2. ì¸í„°í˜ì´ìŠ¤ë¡œ ì˜ì¡´ì„± ì¤„ì´ê¸°

```
// 1. ì¸í„°í˜ì´ìŠ¤ ì •ì˜ - "ì²´ë ¥ì„ ê°€ì§„ ê²ƒ"
UINTERFACE()
class UHealthOwner : public UInterface
{
    GENERATED_BODY()
};

class IHealthOwner
{
    GENERATED_BODY()
public:
    virtual float GetHealth() const = 0;
    virtual void TakeDamage(float Damage) = 0;
};

// 2. ìºë¦­í„°ê°€ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
UCLASS()
class AMyCharacter : public AActor, public IHealthOwner
{
    GENERATED_BODY()

    float Health = 100.0f;

public:
    virtual float GetHealth() const override { return Health; }
    virtual void TakeDamage(float Damage) override { Health -= Damage; }
};

// 3. UIê°€ ì¸í„°í˜ì´ìŠ¤ë¡œ ì†Œí†µ
UCLASS()
class UHealthBar : public UUserWidget
{
    GENERATED_BODY()

    UPROPERTY()
    TWeakObjectPtr<UObject> Target;  // êµ¬ì²´ì ì¸ íƒ€ì…ì„ ëª¨ë¦„!

public:
    void UpdateHealthBar()
    {
        if (!Target.IsValid()) return;

        UObject* Obj = Target.Get();

        // ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆëŠ”ì§€ í™•ì¸
        if (Obj->GetClass()->ImplementsInterface(UHealthOwner::StaticClass()))
        {
            // ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì†Œí†µ
            IHealthOwner* HealthOwner = Cast<IHealthOwner>(Obj);
            float CurrentHealth = HealthOwner->GetHealth();
            // UI ì—…ë°ì´íŠ¸...
        }
    }
};
```

3. ë¸ë¦¬ê²Œì´íŠ¸ë¡œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì†Œí†µ

```
class UEventSender : public UObject
{
    DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnHealthChanged, float, NewHealth);

    UPROPERTY(BlueprintAssignable)
    FOnHealthChanged OnHealthChanged;

    void ChangeHealth(float NewHealth)
    {
        OnHealthChanged.Broadcast(NewHealth);  // ì´ë²¤íŠ¸ ë°œìƒ
    }
};

class UEventReceiver : public UObject
{
public:
    void StartListening(UEventSender* Sender)
    {
        if (Sender)
        {
            // ì´ë²¤íŠ¸ ë°”ì¸ë”©
            Sender->OnHealthChanged.AddDynamic(this, &UEventReceiver::OnHealthChanged);
        }
    }

    virtual void BeginDestroy() override
    {
        // ì¤‘ìš”: ì£½ê¸° ì „ì— ë°˜ë“œì‹œ ì–¸ë°”ì¸ë”©!
        if (EventSender && IsValid(EventSender))
        {
            EventSender->OnHealthChanged.RemoveDynamic(this, &UEventReceiver::OnHealthChanged);
        }

        Super::BeginDestroy();
    }

    UFUNCTION()
    void OnHealthChanged(float NewHealth)
    {
        // ì´ë²¤íŠ¸ ì²˜ë¦¬
    }

private:
    UPROPERTY()
    TWeakObjectPtr<UEventSender> EventSender;  // Weak ì°¸ì¡°ë¡œ ì €ì¥
};
```


##### í•µì‹¬ ì›ì¹™ 4ê°€ì§€

1. UPROPERTYëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ì˜ ê¸°ë³¸
	- Actorë“  Componentë“  UObject ì°¸ì¡°ëŠ” **ë°˜ë“œì‹œ UPROPERTY**
	- ë°°ì—´, ë§µ ë“± ì»¨í…Œì´ë„ˆë„ **UPROPERTY í•„ìˆ˜**
2. ì†Œìœ í•˜ë©´ Hard, ê´€ì°°í•˜ë©´ Week
	- ì¸ë²¤í† ë¦¬ -> ì•„ì´í…œ : **Hard** (ì†Œìœ )
	- UI -> ìºë¦­í„° : **Week** (ê´€ì°°)
	- ë§¤ë‹ˆì € -> ê´€ë¦¬ëŒ€ìƒ : **Hard** (ì±…ì„)
3. ìƒëª…ì£¼ê¸° í•¨ìˆ˜ì—ì„œ ì •ë¦¬í•˜ê¸°
	- **BeginPlay** : ì´ˆê¸°í™”, ì—°ê²° ì„¤ì •
	- **EndPlay** : íƒ€ì´ë¨¸ ì •ë¦¬, ë¸ë¦¬ê²Œì´íŠ¸ ì–¸ë°”ì¸ë”©
	- **Destroyed** : ë§ˆì§€ë§‰ ì •ë¦¬ ì‘ì—…
4. ë™ì  ìƒì„±ì€ 5ë‹¨ê³„ ê³¼ì •
	- NewObject (Outer ì„¤ì •)
	- ì†ì„± ì„¤ì •
	- RegisterComponent() (í•„ìˆ˜!)
	- AttachToComponent (ë¶€ì°©)
	- UPROPERTY ë°°ì—´ì— ì¶”ê°€ (GC ë³´í˜¸)